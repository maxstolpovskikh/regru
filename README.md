## Test task for reg.ru

1. _Дайте определение LA. Укажите причины роста LA._
---

   **Средняя загрузка _(англ. load average)_** — среднее значение загрузки системы за некоторый период времени, как правило, отображается в виде трёх значений, которые представляют собой усредненные величины за последние 1, 5 и 15 минут, чем ниже, тем лучше. В UNIX это среднее значение вычислительной работы, которую выполняет система.
[Википедия](https://ru.wikipedia.org/wiki/Load_Average)

  _Но мне больше нравится слудующее:_

   **Средние значения нагрузки в _Linux_** — это **_«средние значения нагрузки системы»_**, показывающие потребность в исполняемых потоках (задачах) в виде усреднённого количества исполняемых и ожидающих потоков.

   **Причины роста LA**
        
    * Плохо оптимизированное программное обеспечение

    * Атаки

    * Увеличение кол-ва клиентов/потоков/задач (мы же о серверах говорим?)
    
2. _Перечислите порядок действий, для увеличения mysql переменной max_connections до значения в 100 000 без перезагрузки mysql сервера._
---
      
      #Спросить у главного, "точно 100 000? или rm -rf?"

      mysql> SHOW VARIABLES LIKE "max_connections"; #Былобы не плохо для начала посмотреть что там, 
      до того как увеличивать... ещё неплохо записать...
      
      #Воспользоваться вот этим http://www.mysqlcalculator.com/
      
      #Убедиться в том что у сервера есть 270970 MB RAM (Default setup + 100000) серьёзно?
      
      #Внимательно почитать https://www.percona.com/blog/2019/02/25/mysql-challenge-100k-connections/

      mysql> SET GLOBAL max_connections = 100000;

      mysql> SHOW VARIABLES LIKE "max_connections"; #Перепроверить лишним не бывает

3. _Укажите, как можно для посетителей с России и Украины, на запрос A reg.ru отдавать разные IP._
---

   К сожалению с PowerDNS лично встречаться не доводилось, но в свою защиту могу сказать, что речь идёт о GeoIP, [инструкция по настройке geoip для powerdns](https://doc.powerdns.com/authoritative/backends/geoip.html)

4. _Задача написать perl или python скрипт, который на входе будет получать полную BGP таблицу и выдергивать из нее только сети принадлежащие AS компании REG.RU. Далее эти сети нужно агрегировать до максимально возможного префикса и записать в **mysql** базу. Полную BGP таблицу можно взять с сайта http://routeviews.org/_
---

    Работает так:
    * Чистит папку
    * Скачивает oix-full-snapshot-latest.dat.bz2 с routeviews.org
    * Распаковывает oix-full-snapshot-latest.dat
    * Спрашивает у RIPE все сети REGRU-MNT
    * На основании того что получил из RIPE ищет сети в oix-full-snapshot-latest.dat
    * Агрегирует найденное
    * Создаёт базу SQLite! **(Я понимаю, что в задании написано mysql, но разворачивать mysql сервер ради тестового задания/одной таблицы/микропроектов и т.д. непрактично, для работы с базой в 99% случаев использую DjangoORM, SQLAlchemy или как сейчас, Peewee, в любом случае _cursor.execute("""insert into... """) по прежнему доступно!)**
    * Записывает результат в базу
    * У меня выполнился за 0:04:16.197448

_**Спасибо за уделённое время!**_

_С Уважением, Максим Ю. С._

_P.S. просмотр кода может вызывать **боль**_
